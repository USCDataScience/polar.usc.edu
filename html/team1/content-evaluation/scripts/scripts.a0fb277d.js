var content={};content.dataUrl=function(a){return a.split("").slice(1).join("")};var mod;mod=angular.module("infinite-scroll",[]),mod.value("THROTTLE_MILLISECONDS",null),mod.directive("infiniteScroll",["$rootScope","$window","$interval","THROTTLE_MILLISECONDS",function(a,b,c,d){return{scope:{infiniteScroll:"&",infiniteScrollContainer:"=",infiniteScrollDistance:"=",infiniteScrollDisabled:"=",infiniteScrollUseDocumentBottom:"=",infiniteScrollListenForEvent:"@"},link:function(e,f,g){var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;return y=angular.element(b),t=null,u=null,i=null,j=null,q=!0,x=!1,w=null,p=function(a){return a=a[0]||a,isNaN(a.offsetHeight)?a.document.documentElement.clientHeight:a.offsetHeight},r=function(a){return a[0].getBoundingClientRect&&!a.css("none")?a[0].getBoundingClientRect().top+s(a):void 0},s=function(a){return a=a[0]||a,isNaN(window.pageYOffset)?a.document.documentElement.scrollTop:a.ownerDocument.defaultView.pageYOffset},o=function(){var b,c,d,g,h;return j===y?(b=p(j)+s(j[0].document.documentElement),d=r(f)+p(f)):(b=p(j),c=0,void 0!==r(j)&&(c=r(j)),d=r(f)-c+p(f)),x&&(d=p((f[0].ownerDocument||f[0].document).documentElement)),g=d-b,h=g<=p(j)*t+1,h?(i=!0,u?e.$$phase||a.$$phase?e.infiniteScroll():e.$apply(e.infiniteScroll):void 0):i=!1},v=function(a,b){var d,e,f;return f=null,e=0,d=function(){var b;return e=(new Date).getTime(),c.cancel(f),f=null,a.call(),b=null},function(){var g,h;return g=(new Date).getTime(),h=b-(g-e),0>=h?(clearTimeout(f),c.cancel(f),f=null,e=g,a.call()):f?void 0:f=c(d,h,1)}},null!=d&&(o=v(o,d)),e.$on("$destroy",function(){return j.unbind("scroll",o),null!=w?(w(),w=null):void 0}),m=function(a){return t=parseFloat(a)||0},e.$watch("infiniteScrollDistance",m),m(e.infiniteScrollDistance),l=function(a){return u=!a,u&&i?(i=!1,o()):void 0},e.$watch("infiniteScrollDisabled",l),l(e.infiniteScrollDisabled),n=function(a){return x=a},e.$watch("infiniteScrollUseDocumentBottom",n),n(e.infiniteScrollUseDocumentBottom),h=function(a){return null!=j&&j.unbind("scroll",o),j=a,null!=a?j.bind("scroll",o):void 0},h(y),e.infiniteScrollListenForEvent&&(w=a.$on(e.infiniteScrollListenForEvent,o)),k=function(a){if(null!=a&&0!==a.length){if(a instanceof HTMLElement?a=angular.element(a):"function"==typeof a.append?a=angular.element(a[a.length-1]):"string"==typeof a&&(a=angular.element(document.querySelector(a))),null!=a)return h(a);throw new Exception("invalid infinite-scroll-container attribute.")}},e.$watch("infiniteScrollContainer",k),k(e.infiniteScrollContainer||[]),null!=g.infiniteScrollParent&&h(angular.element(f.parent())),null!=g.infiniteScrollImmediateCheck&&(q=e.$eval(g.infiniteScrollImmediateCheck)),c(function(){return q?o():void 0},0,1)}}}]),function(a){function b(){function a(a,c,d){for(var e,f,g,h=([{x:0,y:0},{x:b[0],y:b[1]}],c.x),i=c.y,k=Math.sqrt(b[0]*b[0]+b[1]*b[1]),m=v(b),n=Math.random()<.5?1:-1,o=-n;(e=m(o+=n))&&(f=~~e[0],g=~~e[1],!(Math.min(f,g)>k));)if(c.x=h+f,c.y=i+g,!(c.x+c.x0<0||c.y+c.y0<0||c.x+c.x1>b[0]||c.y+c.y1>b[1])&&(!d||!j(c,a,b[0]))&&(!d||l(c,d))){for(var p,q=c.sprite,r=c.width>>5,s=b[0]>>5,t=c.x-(r<<4),u=127&t,w=32-u,x=c.y1-c.y0,y=(c.y+c.y0)*s+(t>>5),z=0;x>z;z++){p=0;for(var A=0;r>=A;A++)a[y+A]|=p<<w|(r>A?(p=q[z*r+A])>>>u:0);y+=s}return delete c.sprite,!0}return!1}var b=[256,256],n=c,p=d,q=f,r=e,s=e,t=g,u=h,v=m,x=[],y=1/0,z=d3.dispatch("word","end"),A=null,B={};return B.start=function(){function c(){for(var c,l=+new Date;+new Date-l<y&&++g<f&&A;)c=j[g],c.x=b[0]*(Math.random()+.5)>>1,c.y=b[1]*(Math.random()+.5)>>1,i(c,j,g),c.hasText&&a(d,c,e)&&(h.push(c),z.word(c),e?k(e,c):e=[{x:c.x+c.x0,y:c.y+c.y0},{x:c.x+c.x1,y:c.y+c.y1}],c.x-=b[0]>>1,c.y-=b[1]>>1);g>=f&&(B.stop(),z.end(h,e))}var d=o((b[0]>>5)*b[1]),e=null,f=x.length,g=-1,h=[],j=x.map(function(a,b){return a.text=n.call(this,a,b),a.font=p.call(this,a,b),a.style=r.call(this,a,b),a.weight=s.call(this,a,b),a.rotate=t.call(this,a,b),a.size=~~q.call(this,a,b),a.padding=u.call(this,a,b),a}).sort(function(a,b){return b.size-a.size});return A&&clearInterval(A),A=setInterval(c,0),c(),B},B.stop=function(){return A&&(clearInterval(A),A=null),B},B.timeInterval=function(a){return arguments.length?(y=null==a?1/0:a,B):y},B.words=function(a){return arguments.length?(x=a,B):x},B.size=function(a){return arguments.length?(b=[+a[0],+a[1]],B):b},B.font=function(a){return arguments.length?(p=d3.functor(a),B):p},B.fontStyle=function(a){return arguments.length?(r=d3.functor(a),B):r},B.fontWeight=function(a){return arguments.length?(s=d3.functor(a),B):s},B.rotate=function(a){return arguments.length?(t=d3.functor(a),B):t},B.text=function(a){return arguments.length?(n=d3.functor(a),B):n},B.spiral=function(a){return arguments.length?(v=w[a+""]||a,B):v},B.fontSize=function(a){return arguments.length?(q=d3.functor(a),B):q},B.padding=function(a){return arguments.length?(u=d3.functor(a),B):u},d3.rebind(B,z,"on")}function c(a){return a.text}function d(){return"serif"}function e(){return"normal"}function f(a){return Math.sqrt(a.value)}function g(){return 30*(~~(6*Math.random())-3)}function h(){return 1}function i(a,b,c){if(!a.sprite){v.clearRect(0,0,(r<<5)/t,s/t);var d=0,e=0,f=0,g=b.length;for(--c;++c<g;){a=b[c],v.save(),v.font=a.style+" "+a.weight+" "+~~((a.size+1)/t)+"px "+a.font;var h=v.measureText(a.text+"m").width*t,i=a.size<<1;if(a.rotate){var j=Math.sin(a.rotate*q),k=Math.cos(a.rotate*q),l=h*k,m=h*j,n=i*k,o=i*j;h=Math.max(Math.abs(l+o),Math.abs(l-o))+31>>5<<5,i=~~Math.max(Math.abs(m+n),Math.abs(m-n))}else h=h+31>>5<<5;if(i>f&&(f=i),d+h>=r<<5&&(d=0,e+=f,f=0),e+i>=s)break;v.translate((d+(h>>1))/t,(e+(i>>1))/t),a.rotate&&v.rotate(a.rotate*q),v.fillText(a.text,0,0),a.padding&&(v.lineWidth=2*a.padding,v.strokeText(a.text,0,0)),v.restore(),a.width=h,a.height=i,a.xoff=d,a.yoff=e,a.x1=h>>1,a.y1=i>>1,a.x0=-a.x1,a.y0=-a.y1,a.hasText=!0,d+=h}for(var p=v.getImageData(0,0,(r<<5)/t,s/t).data,u=[];--c>=0;)if(a=b[c],a.hasText){for(var h=a.width,w=h>>5,i=a.y1-a.y0,x=0;i*w>x;x++)u[x]=0;if(d=a.xoff,null==d)return;e=a.yoff;for(var y=0,z=-1,A=0;i>A;A++){for(var x=0;h>x;x++){var B=w*A+(x>>5),C=p[(e+A)*(r<<5)+(d+x)<<2]?1<<31-x%32:0;u[B]|=C,y|=C}y?z=A:(a.y0++,i--,A--,e++)}a.y1=a.y0+z,a.sprite=u.slice(0,(a.y1-a.y0)*w)}}}function j(a,b,c){c>>=5;for(var d,e=a.sprite,f=a.width>>5,g=a.x-(f<<4),h=127&g,i=32-h,j=a.y1-a.y0,k=(a.y+a.y0)*c+(g>>5),l=0;j>l;l++){d=0;for(var m=0;f>=m;m++)if((d<<i|(f>m?(d=e[l*f+m])>>>h:0))&b[k+m])return!0;k+=c}return!1}function k(a,b){var c=a[0],d=a[1];b.x+b.x0<c.x&&(c.x=b.x+b.x0),b.y+b.y0<c.y&&(c.y=b.y+b.y0),b.x+b.x1>d.x&&(d.x=b.x+b.x1),b.y+b.y1>d.y&&(d.y=b.y+b.y1)}function l(a,b){return a.x+a.x1>b[0].x&&a.x+a.x0<b[1].x&&a.y+a.y1>b[0].y&&a.y+a.y0<b[1].y}function m(a){var b=a[0]/a[1];return function(a){return[b*(a*=.1)*Math.cos(a),a*Math.sin(a)]}}function n(a){var b=4,c=b*a[0]/a[1],d=0,e=0;return function(a){var f=0>a?-1:1;switch(Math.sqrt(1+4*f*a)-f&3){case 0:d+=c;break;case 1:e+=b;break;case 2:d-=c;break;default:e-=b}return[d,e]}}function o(a){for(var b=[],c=-1;++c<a;)b[c]=0;return b}var p,q=Math.PI/180,r=64,s=2048,t=1;if("undefined"!=typeof document)p=document.createElement("canvas"),p.width=1,p.height=1,t=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2),p.width=(r<<5)/t,p.height=s/t;else{var u=require("canvas");p=new u(r<<5,s)}var v=p.getContext("2d"),w={archimedean:m,rectangular:n};v.fillStyle=v.strokeStyle="red",v.textAlign="center",a.cloud=b}("undefined"==typeof exports?d3.layout||(d3.layout={}):exports),function(a,b){"function"==typeof define&&define.amd?define(["d3"],b):"object"==typeof exports?(process.browser&&require("./d3.slider.css"),module.exports=b(require("d3"))):a.d3.slider=b(a.d3)}(this,function(a){return function(){"use strict";function b(b){b.each(function(){function b(b){"boolean"==typeof r&&(r=a.svg.axis().ticks(Math.round(l/100)).tickFormat(x).orient("horizontal"===q?"bottom":"right")),i=h.ticks?h.copy().range([0,l]):h.copy().rangePoints([0,l],.5),r.scale(i);var c=b.append("svg").classed("d3-slider-axis d3-slider-axis-"+r.orient(),!0).on("click",A),d=c.append("g");"horizontal"===q?(c.style("margin-left",-s+"px"),c.attr({width:l+2*s,height:s}),"top"===r.orient()?(c.style("top",-s+"px"),d.attr("transform","translate("+s+","+s+")")):d.attr("transform","translate("+s+",0)")):(c.style("top",-s+"px"),c.attr({width:s,height:l+2*s}),"left"===r.orient()?(c.style("left",-s+"px"),d.attr("transform","translate("+s+","+s+")")):d.attr("transform","translate(0,"+s+")")),d.call(r)}function o(){if("array"!=f(g)){var b=Math.max(0,Math.min(l,a.event.offsetX||a.event.layerX));c(h.invert?d(h.invert(b/l)):e(b/l))}}function p(){if("array"!=f(g)){var b=l-Math.max(0,Math.min(l,a.event.offsetY||a.event.layerY));c(h.invert?d(h.invert(b/l)):e(b/l))}}function u(){"handle-one"===a.event.sourceEvent.target.id?t=1:"handle-two"==a.event.sourceEvent.target.id&&(t=2);var b=Math.max(0,Math.min(l,a.event.x));c(h.invert?d(h.invert(b/l)):e(b/l))}function z(){"handle-one"===a.event.sourceEvent.target.id?t=1:"handle-two"==a.event.sourceEvent.target.id&&(t=2);var b=l-Math.max(0,Math.min(l,a.event.y));c(h.invert?d(h.invert(b/l)):e(b/l))}function A(){a.event.stopPropagation()}h||(h=a.scale.linear().domain([m,n])),g=g||h.domain()[0];var B=a.select(this).classed("d3-slider d3-slider-"+q,!0),C=a.behavior.drag();if(C.on("dragend",function(){v.slideend(a.event,g)}),"array"==f(g)&&2==g.length?(j=B.append("a").classed("d3-slider-handle",!0).attr("xlink:href","#").attr("id","handle-one").on("click",A).call(C),y=B.append("a").classed("d3-slider-handle",!0).attr("id","handle-two").attr("xlink:href","#").on("click",A).call(C)):j=B.append("a").classed("d3-slider-handle",!0).attr("xlink:href","#").attr("id","handle-one").on("click",A).call(C),"horizontal"===q){if(B.on("click",o),"array"==f(g)&&2==g.length){k=a.select(this).append("div").classed("d3-slider-range",!0),j.style("left",w(h(g[0]))),k.style("left",w(h(g[0]))),C.on("drag",u);var D=100-parseFloat(w(h(g[1])));y.style("left",w(h(g[1]))),k.style("right",D+"%"),C.on("drag",u)}else j.style("left",w(h(g))),C.on("drag",u);l=parseInt(B.style("width"),10)}else{if(B.on("click",p),C.on("drag",z),"array"==f(g)&&2==g.length){k=a.select(this).append("div").classed("d3-slider-range-vertical",!0),j.style("bottom",w(h(g[0]))),k.style("bottom",w(h(g[0]))),C.on("drag",z);var E=100-parseFloat(w(h(g[1])));y.style("bottom",w(h(g[1]))),k.style("top",E+"%"),C.on("drag",z)}else j.style("bottom",w(h(g))),C.on("drag",z);l=parseInt(B.style("height"),10)}r&&b(B)})}function c(b){var c="array"==f(g)&&2==g.length?g[t-1]:g,e=w(h(d(c))),i=w(h(d(b))),l="horizontal"===q?"left":"bottom";if(e!==i){if("array"==f(g)&&2==g.length?(g[t-1]=b,a.event&&v.slide(a.event,g)):a.event&&v.slide(a.event.sourceEvent||a.event,g=b),g[0]>=g[1])return;if(1===t)"array"==f(g)&&2==g.length&&("left"===l?k.style("left",i):k.style("bottom",i)),p?j.transition().styleTween(l,function(){return a.interpolate(e,i)}).duration("number"==typeof p?p:250):j.style(l,i);else{var m=100-parseFloat(i),n=100-parseFloat(i);"left"===l?k.style("right",m+"%"):k.style("top",n+"%"),p?y.transition().styleTween(l,function(){return a.interpolate(e,i)}).duration("number"==typeof p?p:250):y.style(l,i)}}}function d(a){if(a===h.domain()[0]||a===h.domain()[1])return a;var b=a;if(u)b=e(h(a));else{var c=(a-h.domain()[0])%o;b=a-c,2*Math.abs(c)>=o&&(b+=c>0?o:-o)}return b}function e(a){var b=h.ticks?h.ticks():h.domain(),c=b.map(function(b){return a-h(b)}),d=-1,e=0,f=h.ticks?h.range()[1]:h.rangeExtent()[1];do d++,Math.abs(c[d])<f&&(f=Math.abs(c[d]),e=d);while(c[d]>0&&d<c.length-1);return b[e]}function f(a){return{}.toString.call(a).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}var g,h,i,j,k,l,m=0,n=100,o=.01,p=!0,q="horizontal",r=!1,s=50,t=1,u=!1,v=a.dispatch("slide","slideend"),w=a.format(".2%"),x=a.format(".0"),y=null;return b.min=function(a){return arguments.length?(m=a,b):m},b.max=function(a){return arguments.length?(n=a,b):n},b.step=function(a){return arguments.length?(o=a,b):o},b.animate=function(a){return arguments.length?(p=a,b):p},b.orientation=function(a){return arguments.length?(q=a,b):q},b.axis=function(a){return arguments.length?(r=a,b):r},b.margin=function(a){return arguments.length?(s=a,b):s},b.value=function(a){return arguments.length?(g&&c(d(a)),g=a,b):g},b.snap=function(a){return arguments.length?(u=a,b):u},b.scale=function(a){return arguments.length?(h=a,b):h},a.rebind(b,v,"on"),b}});var Bubbles,root,texts;root="undefined"!=typeof exports&&null!==exports?exports:this,Bubbles=function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,b,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,a;return a=a,b=b,k=[],w=null,q=null,r={top:5,right:0,bottom:0,left:0},s=65,x=d3.scale.sqrt().range([0,s]),y=function(a){return parseInt(a.count)},o=function(a){return a.name},z=function(a){return a.name},i=4,t=12,p=.5,B=function(a){return a.forEach(function(b){return b.count=parseInt(b.count),a.sort(function(){return.5-Math.random()})}),a},A=function(a){var b;return b=.1*a.alpha,w.each(m(b)).each(h(p)).attr("transform",function(a){return"translate("+a.x+","+a.y+")"}),q.style("left",function(a){return r.left+a.x-a.dx/2+"px"}).style("top",function(a){return r.top+a.y-a.dy/2+"px"})},l=d3.layout.force().gravity(0).charge(0).size([a,b]).on("tick",A),e=function(e){return e.each(function(e){var f,g,h;return k=B(e),k=0==d?_.shuffle(k):_.sortBy(k,function(a){return d*a.count}),k=k.slice(0,c),f=d3.max(k,function(a){return y(a)}),x.domain([0,f]),g=d3.select(this).selectAll("svg").data([k]),h=g.enter().append("svg"),g.attr("width",a+r.left+r.right),g.attr("height",b+r.top+r.bottom),w=h.append("g").attr("id","bubble-nodes").attr("transform","translate("+r.left+","+r.top+")"),w.append("rect").attr("id","bubble-background").attr("width",a).attr("height",b),q=d3.select(this).selectAll("#bubble-labels").data([k]).enter().append("div").attr("id","bubble-labels"),C(),n(),d3.select(window).on("hashchange",n)})},C=function(){return k.forEach(function(a,b){return a.forceR=Math.max(t,x(y(a))/2.35)}),l.nodes(k).start(),F(),E()},F=function(){return w=w.selectAll(".bubble-node").data(k,function(a){return o(a)}),w.exit().remove(),w.enter().append("a").attr("class","bubble-node").call(l.drag).call(j).append("circle").attr("r",function(a){return x(y(a)/5)})},E=function(){var a;return q=q.selectAll(".bubble-label").data(k,function(a){return o(a)}),q.exit().remove(),a=q.enter().append("a").attr("class","bubble-label").call(l.drag).call(j),a.append("div").attr("class","bubble-label-name").text(function(a){return z(a)}),a.append("div").attr("class","bubble-label-value").text(function(a){return y(a)}),q.style("font-size",function(a){return Math.max(4,x(y(a)/50))+"px"}).style("width",function(a){return x(y(a)/50)+"px"}),q.append("span").text(function(a){return z(a)}).each(function(a){return a.dx=Math.max(x(y(a)/50),this.getBoundingClientRect().width)}).remove(),q.style("width",function(a){return a.dx+"px"}),q.each(function(a){return a.dy=this.getBoundingClientRect().height})},m=function(c){var d,e,f,g;return f=a/2,g=b/2,d=c/8,e=c,function(a){return a.x+=(f-a.x)*d,a.y+=(g-a.y)*e}},h=function(a){return function(b){return k.forEach(function(c){var d,e,f,g,h,j;return b!==c&&(h=b.x-c.x,j=b.y-c.y,d=Math.sqrt(h*h+j*j),e=b.forceR+c.forceR+i,e>d)?(d=(d-e)/d*a,f=h*d,g=j*d,b.x-=f,b.y-=g,c.x+=f,c.y+=g):void 0})}},j=function(a){return a.on("click",g),a.on("mouseover",v),a.on("mouseout",u)},f=function(){return location.replace("#")},g=function(a){return d3.event.preventDefault()},n=function(){var a;return a=decodeURIComponent(location.hash.substring(1)).trim(),D(a)},D=function(a){return w.classed("bubble-selected",function(b){return a===o(b)}),a.length>0?d3.select("#status").html('<h3>The word <span class="active">'+a+"</span> is now active</h3>"):d3.select("#status").html("<h3>No word is active</h3>")},v=function(a){return w.classed("bubble-hover",function(b){return b===a})},u=function(a){return w.classed("bubble-hover",!1)},e.jitter=function(a){return arguments.length?(p=a,l.start(),e):p},e.height=function(a){return arguments.length?(b=a,e):b},e.width=function(b){return arguments.length?(a=b,e):a},e.r=function(a){return arguments.length?(y=a,e):y},e},angular.module("c.util.controllers",[]),angular.module("c.util.controllers").controller("c.util.controllers.StaticPageController",["$scope","$routeParams",function(a,b){function c(){a.params=b}c()}]),angular.module("c.util.controllers").controller("c.util.controllers.modal.Controller",["$scope","$uibModalInstance","data",function(a,b,c){a.data=c,a.ok=function(){b.close(a.selected.item)},a.cancel=function(){b.dismiss("cancel")}}]),angular.module("c.util.services",[]),angular.module("c.util.services").factory("c.util.services.StateHandler",["$window","$rootScope",function(a,b){function c(a){function c(){g.message=i.message,g.isIdle=i==h[0],g.isWorking=i==h[1],g.isSuccess=i==h[3],g.isError=i==h[4],g.isFatal=i==h[5],g.isComplete=i==h[3]||i==h[4]||i==h[5]}function f(a,c){a&&b.$broadcast("c.events.flash",{type:c,message:a})}var g={},h=[{message:""},{message:"Working"},{message:"Complete"},{message:"Success"},{message:"Error"},{message:"Fatal"}],i=h[0];return g.shouldNotRegister=a,g.setAllMessages=function(a){for(var b=0;b<h.length;b++)a[b]||(a[b]=""),h[b].message=a[b]},g.setMessageForState=function(a,b){h[a]&&(h[a].message=b)},g.reset=function(){return g.idle(),g},g.idle=function(){return i=h[0],c(),d(this),g},g.initiate=function(){return i=h[1],c(),e(this),g},g.success=function(a){return i=h[3],c(),d(this),f(a,"success"),g},g.error=function(a){return i=h[4],c(),d(this),f(a,"danger"),g},g.fatal=function(a){return i=h[5],a=a,c(),d(this),f(a,"danger"),g},g}function d(a){if(!a.shouldNotRegister){var b=c.queue.indexOf(a);b>-1&&c.queue.splice(b,1)}}function e(a){a.shouldNotRegister||c.queue.push(a)}return c.queue=[],c.getInstance=function(a){var b=new c(a);return b.idle(),b},c}]),function(){function a(a){function b(a,b){this.page=1,this.ResourceClass=a,this.action=b,this.requestQueue=[],this.requestCount=0,this.totalPages=100}return b.prototype.on=function(a){return this.dataSet=a,this},b.prototype.setTotalPages=function(a){return this.totalPages=a,this},b.prototype.paginate=function(b,c,d){var e=this;if(!(e.page>e.totalPages))return e._queuePush(),1==e.requestQueue.length&&a(function(){e._dataFetch(b,c||angular.noop,d||angular.noop)},0),e},b.prototype._dataFetch=function(a,b,c){var d=this,e=_.extend(a,{from:d.page});d.ResourceClass[d.action](e).$promise.then(function(e){d._afterResolution(e,a,b,c),b(e)},function(a){c(a)})},b.prototype._afterResolution=function(a,b,c,d){var e=this;e._dataPush(a),e._setNextPage(a),e._queueShift(),e.requestQueue.length>0&&e._isValidResponse(a)?e._dataFetch(b,c,d):e.requestQueue=[]},b.prototype._setNextPage=function(a){var b=this;b._isValidResponse(a)&&(b.page=b.page+1)},b.prototype._dataPush=function(a){var b=this;angular.forEach(a,function(a){b.dataSet.push(a)})},b.prototype._queuePush=function(){var a=this;a.requestCount++,a.requestQueue.push({count:a.requestCount})},b.prototype._queueShift=function(){this.requestQueue.shift()},b.prototype._isValidResponse=function(a){return a&&a.length>0},{getInstance:function(a,c){return new b(a,c)}}}angular.module("c.util.services").factory("c.util.services.Paginator",["$timeout",a])}(),angular.module("c.util.directives",["c.util.services"]),angular.module("c.util.directives").directive("cGlobalLoader",[function(){return{scope:{delay:"=?"},replace:!0,templateUrl:"app/scripts/util/templates/global_loader.html",controller:["$scope","c.util.services.StateHandler","$timeout",function(a,b,c){function d(){a.queue=b.queue}var e=(a.delay||200,{message:"Working, Please wait..."});d(),a.$watch(function(){return a.queue.length},function(b,d){c(function(){b>0&&a.queue.length>0?a.loaderConfig=e:a.loaderConfig=null},0)})}]}}]),angular.module("c.util",["c.util.controllers","c.util.services","c.util.directives"]),angular.module("c.data",[]),angular.module("c.data").factory("c.data.Document",["$resource","$q",function(a,b){var c=function(a,b){var c=["docType"],d=_.filter(_.keys(a),function(a){return!_.include(c,a)}),e={};return _.each(d,function(b){e[b]=a[b]}),angular.toJson(e)},d=a("http://104.236.190.155:9200/polar/:docType/:id",{docType:"@docType",id:"@id"},{get:{method:"GET",url:"http://104.236.190.155:9200/polar/:docType/:id",transformRequest:c,transformResponse:function(a,b){var a=JSON.parse(a);return a._source},cached:!0},count:{method:"POST",url:"http://104.236.190.155:9200/polar/:docType/_search",isArray:!1,transformRequest:c,transformResponse:function(a,b){var a=JSON.parse(a);return{count:a.hits.total}}},search:{method:"POST",url:"http://104.236.190.155:9200/polar/:docType/_search",isArray:!0,transformRequest:c,transformResponse:function(a,b){var a=JSON.parse(a);return _.pluck(a.hits.hits,"_source")}},aggregateEntity:{method:"POST",url:"http://104.236.190.155:9200/polar/:docType/_search?size=0",isArray:!0,transformRequest:c,transformResponse:function(a,b){var a=JSON.parse(a);return a.aggregations.entities.entity_name.buckets}}}),e=d.prototype;return e.displayType=function(){var a=this["mime-type"].split("-").splice(1);return a.join("-")},e.isJournal=function(){return!_.isEmpty(this.journal)},e.getAuthors=function(){return _.chain(this.journal.authors).pluck("name").filter(function(a){return a}).value()},e.getAffiliations=function(){return _.chain(this.journal.authors).pluck("affiliations").flatten().filter(function(a){return a}).value()},e.getEntities=function(a){return _.chain(this.entities[a]).pluck("name").value()},e.isEntityPresent=function(a){return!_.isEmpty(this.entities[a])},e.isImage=function(){return"image"==this["mime-type"].split("-")[0]},e.getURL=function(){var a=this["local-path"].split("/");return"http://sng.usc.edu/polar/"+this["mime-type"]+"/"+a.slice(-2).join("/")},d}]),angular.module("c.data").factory("c.data.Metadata",["$resource","$q",function(a,b){var c=function(a){return a=a.aggregations.l1.buckets,_.reduce(a,function(a,b){return a[b.key]={values:b.l2.buckets,doc_count:b.doc_count,key:b.key},a},{})},d=a("http://104.236.190.155:9200/polar2/:id",{id:"@id"},{search:{method:"POST",url:"http://104.236.190.155:9200/polar2/_search"},stats:{method:"GET",url:"http://104.236.190.155:9200/polar2/_stats"}});d.prototype;return d.fetchCrawlerData=function(){var a=b.defer();return d.search({aggs:{l1:{terms:{field:"crawl.domain",size:50},aggs:{l2:{terms:{field:"content-type",size:50}}}}},size:0}).$promise.then(function(b){a.resolve(c(b))},function(b){a.reject(b)}),a.promise},d.fetchPageTilteData=function(){var a=b.defer();return d.search({aggs:{l1:{terms:{field:"tika-metadata.title",size:5}}},size:0}).$promise.then(function(b){var c=b.aggregations.l1.buckets;total=b.hits.total,c=_.map(c,function(a){return a.norm=a.doc_count/total,a}),a.resolve(c)},function(b){a.reject(b)}),a.promise},d.fetchParserData=function(){var a=b.defer();return d.search({aggs:{l1:{terms:{field:"content-type",size:50},aggs:{l2:{terms:{field:"tika-metadata.X-Parsed-By",size:50}}}}},size:0}).$promise.then(function(b){a.resolve(c(b))},function(b){a.reject(b)}),a.promise},d.fetchNERData=function(){var a=b.defer(),c=function(a){return[{key:"OPEN NLP",values:[{label:"opennlp-max",value:a["opennlp-max"].value},{label:"opennlp-average",value:a["opennlp-average"].value}]},{key:"CORE NLP",values:[{label:"corenlp-max",value:a["corenlp-max"].value},{label:"corenlp-average",value:a["corenlp-average"].value}]},{key:"NLTK",values:[{label:"nltk-max",value:a["nltk-max"].value},{label:"nltk-average",value:a["nltk-average"].value}]},{key:"OVERLAP",values:[{label:"opennlp-corenlp-max",value:a["opennlp-corenlp-max"].value},{label:"opennlp-corenlp-average",value:a["opennlp-corenlp-average"].value},{label:"corenlp-nltk-max",value:a["corenlp-nltk-max"].value},{label:"corenlp-nltk-average",value:a["corenlp-nltk-average"].value},{label:"nltk-opennlp-max",value:a["nltk-opennlp-max"].value},{label:"nltk-opennlp-average",value:a["nltk-opennlp-average"].value},{label:"union-max",value:a["union-max"].value},{label:"union-average",value:a["union-average"].value}]}]};return d.search({aggs:{"nltk-max":{max:{field:"ner.overlap.nltk"}},"nltk-average":{avg:{field:"ner.overlap.nltk"}},"opennlp-max":{max:{field:"ner.overlap.opennlp"}},"opennlp-average":{avg:{field:"ner.overlap.opennlp"}},"corenlp-max":{max:{field:"ner.overlap.corenlp"}},"corenlp-average":{avg:{field:"ner.overlap.corenlp"}},"union-average":{avg:{field:"ner.overlap.union"}},"union-max":{max:{field:"ner.overlap.union"}},"opennlp-corenlp-average":{avg:{field:"ner.overlap.opennlp-corenlp"}},"opennlp-corenlp-max":{max:{field:"ner.overlap.opennlp-corenlp"}},"corenlp-nltk-average":{avg:{field:"ner.overlap.corenlp-nltk"}},"corenlp-nltk-max":{max:{field:"ner.overlap.corenlp-nltk"}},"nltk-opennlp-average":{avg:{field:"ner.overlap.nltk-opennlp"}},"nltk-opennlp-max":{max:{field:"ner.overlap.nltk-opennlp"}}},size:0}).$promise.then(function(b){a.resolve(c(b.aggregations))},function(b){a.reject(b)}),a.promise},d.fetchMeasurementData=function(a,c){var e=b.defer(),f={term:{}};a&&(f.term["crawl.domain"]=a),c&&(f.term["content-type"]=c);var g={aggs:{l1:{terms:{field:"measurements.unit",size:15},aggs:{stat:{extended_stats:{field:"measurements.value",sigma:1}}}}},size:0};(a||c)&&(g.query=f);var h=function(a){var b=a.aggregations.l1.buckets;return _.chain(b).map(function(a){return{label:a.key,values:{Q1:(a.stat.avg+.5*a.stat.std_deviation_bounds.lower)/a.stat.max,Q2:a.stat.avg/a.stat.max,Q3:(a.stat.avg+.5*a.stat.std_deviation_bounds.upper)/a.stat.max,whisker_low:a.stat.min/a.stat.max,whisker_high:a.stat.max/a.stat.max,norm:a.stat.max}}}).filter(function(a){return"XXX"!=a.label}).value()};return d.search(g).$promise.then(function(a){e.resolve(h(a))},function(a){e.reject(a)}),e.promise},d.datasetSize=function(){var a=b.defer();return d.search({aggs:{l1:{sum:{field:"size"}}},size:0}).$promise.then(function(b){a.resolve({size:b.aggregations.l1.value,doc_count:b.hits.total})},function(b){a.reject(b)}),a.promise},d.metadataSize=function(){var a=b.defer();return d.stats().$promise.then(function(b){a.resolve({size:b._all.primaries.store.size_in_bytes,doc_count:b._all.primaries.docs.count})},function(b){a.reject(b)}),a.promise},d}]),angular.module("c.data").factory("c.data.Aggregator",["c.data.Document","$q",function(a,b){function c(a,b){this.type=a,this.entity=d(b)}var d=function(a){var b={phones:"entities.phones",sweet:"entities.sweet",TIME:"entities.TIME",PERCENT:"entities.PERCENT",PERSON:"entities.PERSON",LOCATION:"entities.LOCATION",urls:"entities.urls",MONEY:"entities.MONEY",DATE:"entities.DATE",ORGANIZATION:"entities.ORGANIZATION",emails:"entities.emails",geo:"geo"};return b[a]};return c.prototype.tokenization=function(a){return this.entityNameExtension=a?".name":".name.raw",this.fullEntityName=this.entity+this.entityNameExtension,this},c.prototype.useOccuranceCount=function(a){return this.nested=a,this},c.prototype.setSourceFilter=function(a){return this.sourceFilter=a,this},c.prototype.buildFilters=function(a){if(entityFullName=function(a,b){return b?a+".name":a+".name.raw"},0==a.length)return this;var b=function(a,b){var c={};return c[entityFullName(d(a.entity),a.fuzzy)]=a.string,{bool:{must:[{match:c}]}}},c=function(a,b){return{nested:{path:b,query:{bool:{should:a}}}}},e=_.map(a,function(a){return c(_.map(a,b),d(a[0].entity))});return this.filter={bool:{must:e}},this},c.prototype.buildQuery=function(a){var b,c,d=this;return b={entity_name:{terms:{field:d.fullEntityName,size:a}}},c={entity_count:{sum:{field:d.entity+".count"}}},d.nested&&(b.entity_name.aggs=c),this.query=b,this},c.prototype.overrideQuery=function(a){return this.query=a,this},c.prototype.aggregate=function(b){var c=this,d={docType:c.type,aggs:{entities:{nested:{path:c.entity},aggs:c.query}}};this.filter&&(d.query=this.filter),this.sourceFilter&&(d._source=this.sourceFilter);var e=a.aggregateEntity(d);return e.$promise.then(function(a){function d(a){return c.nested?a.entity_count.value:a.doc_count}var e=_.map(a,b||function(a){return{text:a.key,docCount:a.doc_count,size:d(a)}});return e})},c.prototype.search=function(b){var c=this;return finalQuery={docType:c.type,size:b},this.filter&&(finalQuery.query=this.filter),this.sourceFilter&&(finalQuery._source=this.sourceFilter),a.search(finalQuery).$promise},c}]),angular.module("c.data").factory("c.data.Entity",["c.data.Aggregator","$q","c.data.Search",function(a,b,c){function d(){}return d.getValidDates=function(c,d,e){var f=b.defer(),g=_.map(e,function(a){return _.map(a.tags,function(a){return a.text.split("-").join(" ")})}),h=_.map(g,function(a){return _.map(a,function(a){return{entity:"sweet",string:a}})}),i=function(a){return _.chain(a).filter(function(a){var b=parseInt(a.text);return!isNaN(b)&&b>=1900&&2050>=b}).map(function(a){return a.year=parseInt(a.text),a}).sortBy(function(a){return a.text}).value()};return new a(c,"DATE").tokenization(!0).useOccuranceCount(!0).buildFilters(h).buildQuery(1e3).aggregate().then(function(a){f.resolve(i(a))},function(){f.reject()}),f.promise},d.getLocationsByYear=function(c,d,e,f){var g=b.defer(),h=_.map(f,function(a){return _.map(a.tags,function(a){return a.text.split("-").join(" ")})}),i=_.map(h,function(a){return _.map(a,function(a){return{entity:"sweet",string:a}})});return i.push([{entity:"DATE",string:d.toString(),fuzzy:!0}]),new a(c,"geo").setSourceFilter("locations").buildFilters(i,!0).overrideQuery({entity_name:{terms:{field:"geo.name.raw",size:e},aggs:{lat:{max:{field:"geo.location.lat"}},lon:{max:{field:"geo.location.lon"}}}}}).aggregate(function(a){return{name:a.key,size:a.doc_count,lat:a.lat.value,lon:a.lon.value}}).then(function(a){g.resolve(a)},function(){g.reject()}),g.promise},d.getCountDocumentWithinRegions=function(a,d){var e=b.defer();return new c(a,0).geoBoundsQuery(d[1],d[3]).execute().then(function(a){e.resolve(a)},function(){e.reject()}),e.promise},d}]),angular.module("c.data").factory("c.data.Sweet",["$resource","$q",function(a,b){var c=a("http://104.236.190.155:9200/sweet/concept/",{},{query:{method:"POST",url:"http://104.236.190.155:9200/sweet/_suggest",transformResponse:function(a,b){var a=JSON.parse(a);return _.map(a["concept-suggest"][0].options,function(a){return{text:a.text}})},cached:!0,isArray:!0}});c.prototype;return c.autocomplete=function(a){return c.query({"concept-suggest":{text:a,completion:{field:"suggest",size:10}}}).$promise},c}]),angular.module("c.data").factory("c.data.Search",["$resource","$q","c.data.Document",function(a,b,c){function d(a,b){this.type=a,this.size=b}return d.prototype.geoBoundsQuery=function(a,b){return this.query={bool:{must:{match_all:{}},filter:{geo_bounding_box:{locations:{top_left:{lat:a.lat,lon:a.lng},bottom_right:{lat:b.lat,lon:b.lng}}}}}},this},d.prototype.execute=function(){var a=this;return finalQuery={docType:a.type,size:a.size,query:a.query},c.count(finalQuery).$promise},d}]),angular.module("c.data").factory("c.data.Size",["$resource","$q",function(a,b){var c=a(content.dataUrl("/data/size"),{id:"@id"},{cluster:{method:"GET",url:content.dataUrl("/data/size/clusters.csv"),transformResponse:function(a){var b=a.split("\n");return b.pop(),{data:_.reduce(b,function(a,b){var c=b.replace(/\"/g,"").split(",");return a[c[0]]=c.slice(1,c.length),a},{})}}},summary:{method:"GET",url:content.dataUrl("/data/size/summary"),transformResponse:function(a){var b=a.split("--------");return b.pop(),{data:_.map(b,function(a){var b=a.split("\n");return b=_.filter(b,function(a){return""!=a}),{key:b[0],summary:{min:b[1],max:b[6],mean:b[4],median:b[3]}}})}}},aggregate:{method:"GET",url:content.dataUrl("/data/size/size.json"),transformResponse:function(a){buckets=c.buckets;var b=function(a,b){_.max(b,function(a,b){return a});return _.map(b,function(b,c){var d=parseInt(c);return{key:a,x:d,size:buckets[d],label:"("+buckets[d]+","+(buckets[d+1]||"Inf")+"]",y:b}})},d=function(a,b){return _.reduce(_.range(buckets.length),function(c,d){return c[d]=(parseInt(a[d])||0)+(parseInt(b[d])||0),c},{})},e=JSON.parse(a),f=_.chain(e).keys().map(function(a){return{key:a,values:b(a,e[a])}}).reduce(function(a,b){
return a[b.key]=b,a},{}).value(),g=_.reduce(_.values(e),d,{});return f.all={key:"all",values:b("all",g)},f}}});c.prototype;return c.buckets=[0,4,32,256,2048,4096,8192,16384,32768,65536,131072,262144,1048576,8388608,67108864],c}]),angular.module("c.data").factory("c.data.Type",[function(){function a(){}var b=["application-atom+xml","application-dif+xml","application-dita+xml; format=concept","application-epub+zip","application-fits","application-gzip","application-java-vm","application-msword","application-octet-stream","application-pdf","application-postscript","application-rdf+xml","application-rss+xml","application-rtf","application-vnd.google-earth.kml+xml","application-vnd.ms-excel.sheet.4","application-vnd.ms-htmlhelp","application-vnd.rn-realmedia","application-x-7z-compressed","application-x-bibtex-text-file","application-x-bittorrent","application-x-bzip2","application-x-compress","application-x-debian-package","application-x-elc","application-x-executable","application-x-font-ttf","application-x-grib","application-x-gtar","application-x-hdf","application-x-java-jnilib","application-x-lha","application-x-matroska","application-x-msdownload","application-x-msdownload; format=pe","application-x-msdownload; format=pe32","application-x-msmetafile","application-x-rar-compressed","application-x-rpm","application-x-sh","application-x-shockwave-flash","application-x-sqlite3","application-x-stuffit","application-x-tar","application-x-tex","application-x-tika-msoffice","application-x-tika-ooxml","application-x-xz","application-xhtml+xml","application-xml","application-xslt+xml","application-zip","application-zlib","audio-basic","audio-mp4","audio-mpeg","audio-x-aiff","audio-x-flac","audio-x-mpegurl","audio-x-ms-wma","audio-x-wav","image-gif","image-jpeg","image-png","image-svg+xml","image-tiff","image-vnd.adobe.photoshop","image-vnd.dwg","image-vnd.microsoft.icon","image-x-bpg","image-x-ms-bmp","image-x-xcf","message-rfc822","message-x-emlx","text-html","text-plain","text-troff","text-x-csrc","text-x-diff","text-x-jsp","text-x-matlab","text-x-perl","text-x-php","text-x-python","text-x-vcard","video-mp4","video-mpeg","video-quicktime","video-x-flv","video-x-m4v","video-x-ms-asf","video-x-ms-wmv","video-x-msvideo"];return a.get=function(){return b},a}]),angular.module("c.data").factory("c.data.Language",["$resource","$q",function(a,b){var c=a(content.dataUrl("/data/language"),{id:"@id"},{get:{method:"GET",url:content.dataUrl("/data/languages.json"),transformResponse:function(a){var b=JSON.parse(a),c=function(a){return _.map(a,function(a,b){return{x:b,y:a}})};return _.reduce(b,function(a,b,d){return a[d]=c(b),a},{})},isArray:!1}});c.prototype;return c}]),angular.module("d3",[]).factory("d3",[function(){return window.d3}]),angular.module("c.components.filters",["ui.slider"]),function(){var a=angular.module("c.components.filters");a.directive("cEntityFilter",[function(){return{scope:{entity:"="},replace:!0,templateUrl:"app/scripts/components/filters/entity_template.html"}}])}(),function(){var a=angular.module("c.components.filters");a.directive("cDocTypeFilter",[function(){return{scope:{documentType:"="},replace:!0,templateUrl:"app/scripts/components/filters/doc_type_template.html",controller:["$scope","$timeout",function(a,b){a.documentType="application-pdf"}]}}])}(),function(){var a=angular.module("c.components.filters");a.directive("cMagnificationFilter",[function(){return{scope:{magnification:"="},replace:!0,templateUrl:"app/scripts/components/filters/magnification_template.html"}}])}(),function(){var a=angular.module("c.components.filters");a.directive("cConceptFilter",[function(){return{scope:{queries:"=",functions:"="},replace:!0,templateUrl:"app/scripts/components/filters/concept_template.html",controller:["$scope","c.data.Sweet",function(a,b){function c(a){return b.autocomplete(a)}function d(){a.queries.push({tags:[]})}function e(b){a.queries.splice(b,1)}a.loadTags=c,a.addQuery=d,a.removeQuery=e,a.functions={addQuery:d,removeQuery:e},a.queries=[]}]}}])}(),angular.module("c.components.tagCloud",["c.data"]),function(){var a=angular.module("c.components.tagCloud");a.controller("c.components.tagCloud.Controller",["$scope","c.util.services.StateHandler","c.data.Aggregator","$timeout",function(a,b,c,d){function e(b){var c,d=_.max(b,function(a){return a.size}).size;return c=_.map(b,function(b){return b.size=Math.tanh(b.size/d)*(150*parseInt(a.zoomLevel)),b})}function f(){if(a.docType&&a.entity){var b="raw"!=a.tokenization,d="occurrence"==a.countType;a.state.initiate(),new c(a.docType,a.entity).tokenization(b).useOccuranceCount(d).buildQuery(1e3).aggregate().then(function(b){a.rTags=b,a.tags=e(a.rTags,0),a.state.success()},function(){a.state.fatal()})}}function g(){a.state=b.getInstance(),a.tags=[],a.loadEntities=f,a.zoomLevel="1",d(function(){f()},500)}g()}])}(),function(){var a=angular.module("c.components.tagCloud");a.directive("cTagCloud",[function(){return{scope:{},replace:!0,templateUrl:"app/scripts/components/tag_cloud/template.html",controller:"c.components.tagCloud.Controller",link:function(a,b,c){function d(a){d3.select(e).append("svg").attr("width",e.clientWidth).attr("height",500).attr("class","wordcloud").append("g").attr("transform","translate(650,200)").selectAll("text").data(a).enter().append("text").style("font-size",function(a){return a.size+"px"}).style("fill",function(a,b){return f(b)}).attr("transform",function(a){return"translate("+[a.x,a.y]+")rotate("+a.rotate+")"}).text(function(a){return a.text})}var e=angular.element(b.find(".tag-cloud"))[0],f=d3.scale.linear().domain([0,1,2,3,4,5,6,10,15,20,100]).range(["#ddd","#ccc","#bbb","#aaa","#999","#888","#777","#666","#555","#444","#333","#222"]);a.$watch("tags",function(b,c){b&&b.length>0&&(angular.element(e).find("svg").remove(),d3.layout.cloud().size([e.clientWidth-50,450]).words(a.tags).rotate(0).fontSize(function(a){return a.size}).on("end",d).start())})}}}])}(),angular.module("c.components.flash",[]),function(){var a=angular.module("c.components.flash");a.controller("c.components.flash.Controller",["$scope","$rootScope",function(a,b){function c(){b.$on("c.events.flash",function(b,c){a.flashConfig=c,a.closeFlash=!1}),b.$on("$routeChangeStart",function(b){a.flashConfig=null,a.closeFlash=!0}),a.close=d}function d(){a.closeFlash=!0}c()}])}(),function(){var a=angular.module("c.components.flash");a.directive("cFlash",[function(){return{scope:{},replace:!0,templateUrl:"app/scripts/components/flash/template.html",controller:"c.components.flash.Controller"}}])}(),angular.module("c.components.size",["c.data"]),function(){var a=angular.module("c.components.size");a.controller("c.components.size.Controller",["$scope","c.data.Size","$uibModal","c.util.services.StateHandler",function(a,b,c,d){function e(){a.cState=d.getInstance(),a.sState=d.getInstance(),a.cState.initiate(),a.sState.initiate(),b.cluster().$promise.then(function(b){a.clusteredSizes=b.data,a.cState.success()}),b.summary().$promise.then(function(b){a.clusterSummary=b.data,a.config={itemsPerPage:a.clusterSummary.length},a.sState.success()})}a.isClusterable=function(b){return null!=a.clusteredSizes[b]},a.openChart=function(b){c.open({animation:a.animationsEnabled,templateUrl:"app/scripts/components/size/size_chart.html",controller:"c.util.controllers.modal.Controller",size:"md",resolve:{data:function(){return{key:b,value:a.clusteredSizes[b]}}}})},e()}])}(),function(){var a=angular.module("c.components.size");a.directive("cTypeSize",[function(){return{scope:{},replace:!0,templateUrl:"app/scripts/components/size/template.html",controller:"c.components.size.Controller"}}])}(),angular.module("c.components.typeList",["c.data"]),function(){var a=angular.module("c.components.typeList");a.controller("c.components.typeList.Controller",["$scope","c.data.Type",function(a,b){function c(){a.formats=_.map(b.get(),function(a){return{key:a}}),a.loadSelectedList=function(){a.selected=_.chain(a.formats).filter(function(a){return a.$selected}).pluck("key").value()},a.select=function(b){a.selected=b}}c()}])}(),function(){var a=angular.module("c.components.typeList");a.directive("cTypeList",[function(){return{scope:{selected:"=",multiple:"="},replace:!0,templateUrl:"app/scripts/components/type_list/template.html",controller:"c.components.typeList.Controller"}}])}(),angular.module("c.components.sizeDist",["c.data","nvd3","c.components.typeList"]),function(){var a=angular.module("c.components.sizeDist");a.controller("c.components.sizeDist.Controller",["$scope","c.data.Size","c.util.services.StateHandler",function(a,b,c){function d(){a.types=[],a.data=[],a.state=c.getInstance(),a.state.initiate(),a.dump=b.aggregate(),a.dump.$promise.then(function(b){a.state.success(),e(a.dump)},function(){a.state.fatal()}),a.buckets=b.buckets,a.options={chart:{type:"multiBarChart",height:450,margin:{top:20,right:20,bottom:45,left:145},clipEdge:!0,duration:500,stacked:!0,xAxis:{axisLabel:"Size buckets",showMaxMin:!1,tickFormat:function(a){return d3.format(",f")(a)}},yAxis:{axisLabel:"Frequency",axisLabelDistance:50,tickFormat:function(a){return d3.format(",.1f")(a)}}}}}function e(b){a.data=[b.all]}a.$watch("types",function(b){if(b&&b.length>0){var c=a.dump;a.data=_.reduce(b,function(a,b){return a.push(c[b]),a},[c.all])}}),d()}])}(),function(){var a=angular.module("c.components.sizeDist");a.directive("cSizeDist",[function(){return{scope:{},replace:!0,templateUrl:"app/scripts/components/size_dist/template.html",controller:"c.components.sizeDist.Controller",link:function(a,b,c){}}}])}(),angular.module("c.components.crawler",["c.data","nvd3"]),function(){var a=angular.module("c.components.crawler");a.controller("c.components.crawler.Controller",["$scope","c.data.Metadata","c.util.services.StateHandler",function(a,b,c){function d(){var d=c.getInstance();d.initiate(),b.fetchCrawlerData().then(function(b){a.dump=b,a.domains=_.keys(b),a.selectedDomain=a.domains[0],d.success()},function(){d.fatal()})}function e(){var d=c.getInstance();d.initiate(),b.fetchPageTilteData().then(function(b){a.titles=b,d.success()},function(){d.fatal()})}function f(){a.data=[],d(),e(),a.options={chart:{type:"pieChart",height:500,x:function(a){return a.key},y:function(a){return a.doc_count},showLabels:!0,duration:500,labelThreshold:1/0,labelSunbeamLayout:!1,legend:{margin:{top:5,right:35,bottom:5,left:0}}}}}a.$watch("selectedDomain",function(b){b&&(a.data=a.dump[b].values)}),f()}])}(),function(){var a=angular.module("c.components.crawler");a.directive("cCrawler",[function(){return{scope:{},replace:!0,templateUrl:"app/scripts/components/crawler/template.html",controller:"c.components.crawler.Controller"}}])}(),angular.module("c.components.parser",["c.data","nvd3"]),function(){var a=angular.module("c.components.parser");a.controller("c.components.parser.Controller",["$scope","c.data.Metadata","$q","c.util.services.StateHandler",function(a,b,c,d){function e(){var e=d.getInstance();e.initiate(),c.all([b.datasetSize(),b.metadataSize()]).then(function(b){a.statData=[{key:"Dataset size",y:b[0].size/1048576},{key:"Metadata size",y:b[1].size/1048576}],e.success()},function(){e.fatal()}),a.statOptions={chart:{type:"pieChart",height:450,donut:!0,x:function(a){return a.key},y:function(a){return a.y},showLabels:!0,pie:{startAngle:function(a){return a.startAngle/2-Math.PI/2},endAngle:function(a){return a.endAngle/2-Math.PI/2}},duration:500,legend:{margin:{top:5,right:70,bottom:5,left:0}}}}}function f(){a.data=[];var c=d.getInstance();c.initiate(),b.fetchParserData().then(function(b){a.dump=b,a.contentTypes=_.keys(b),a.selectedType=a.contentTypes[0],c.success()},function(){c.fatal()}),a.options={chart:{type:"discreteBarChart",height:500,width:500,x:function(a){return a.key},y:function(a){return a.doc_count},showValues:!0,duration:500,xAxis:{axisLabel:"Parsers"},yAxis:{axisLabel:"Count",axisLabelDistance:-10},labelSunbeamLayout:!1,legend:{margin:{top:5,right:35,bottom:5,left:0}}}},e()}a.$watch("selectedType",function(b){b&&(a.data=[a.dump[b]])}),f()}])}(),function(){var a=angular.module("c.components.parser");a.directive("cParser",[function(){return{scope:{},replace:!0,templateUrl:"app/scripts/components/parser/template.html",controller:"c.components.parser.Controller"}}])}(),angular.module("c.components.language",["c.data","nvd3"]),function(){var a=angular.module("c.components.language");a.controller("c.components.language.Controller",["$scope","c.data.Language","c.util.services.StateHandler",function(a,b,c){function d(){a.data=[];var d=c.getInstance();d.initiate(),b.get().$promise.then(function(b){a.dump=b,a.contentTypes=_.chain(b).keys().filter(function(a){return"$"!=a[0]}).sortBy().value(),a.selectedType="text-html",d.success()},function(){d.fatal()}),a.options={chart:{type:"pieChart",height:500,x:function(a){return a.x},y:function(a){return a.y},showLabels:!0,duration:500,labelThreshold:1/0,labelSunbeamLayout:!1,legend:{margin:{top:5,right:35,bottom:5,left:0}}}}}a.$watch("selectedType",function(b){b&&(a.data=a.dump[b])}),d()}])}(),function(){var a=angular.module("c.components.language");a.directive("cLanguage",[function(){return{scope:{},replace:!0,templateUrl:"app/scripts/components/language/template.html",controller:"c.components.language.Controller"}}])}(),angular.module("c.components.ner",["c.data","nvd3"]),function(){var a=angular.module("c.components.ner");a.controller("c.components.ner.Controller",["$scope","c.data.Metadata","c.util.services.StateHandler",function(a,b,c){function d(){a.data=[];var d=c.getInstance();d.initiate(),b.fetchNERData().then(function(b){a.data=b,d.success()},function(){d.fatal()}),a.options={chart:{type:"multiBarHorizontalChart",height:550,x:function(a){return a.label},y:function(a){return a.value},margin:{top:20,right:20,bottom:45,left:150},showControls:!0,showValues:!0,duration:500,xAxis:{showMaxMin:!0},yAxis:{axisLabel:"Values",tickFormat:function(a){return d3.format(",.2f")(a)}}}}}d()}])}(),function(){var a=angular.module("c.components.ner");a.directive("cNer",[function(){return{scope:{},replace:!0,templateUrl:"app/scripts/components/ner/template.html",controller:"c.components.ner.Controller"}}])}(),angular.module("c.components.measurement",["c.data","nvd3"]),function(){var a=angular.module("c.components.measurement");a.controller("c.components.measurement.Controller",["$scope","c.data.Metadata","c.util.services.StateHandler",function(a,b,c){function d(){var d=c.getInstance();d.initiate(),b.fetchParserData().then(function(b){a.contentTypes=_.keys(b),a.contentTypes.push("NONE"),a.selectedType="NONE",d.success()},function(){d.fatal()})}function e(){var d=c.getInstance();d.initiate(),b.fetchCrawlerData().then(function(b){a.domains=_.keys(b),a.domains.push("NONE"),a.selectedDomain="NONE",d.success()},function(){d.fatal()})}function f(){var d=a.state=c.getInstance();d.initiate();var e="NONE"!=a.selectedDomain?a.selectedDomain:null,f="NONE"!=a.selectedType?a.selectedType:null;b.fetchMeasurementData(e,f).then(function(b){a.data=b,d.success()},function(){d.fatal()})}function g(){a.data=[],e(),d(),f(),a.loadMeasurements=f,a.options={chart:{type:"boxPlotChart",height:550,margin:{top:20,right:20,bottom:60,left:75},x:function(a){return a.label},y:function(a){return a.values.mean},maxBoxWidth:75,xAxis:{axisLabel:"Normalized range"},yAxis:{axisLabel:"Units",tickFormat:function(a){return d3.format(",.2f")(a)}},useInteractiveGuideline:!1,tooltip:{contentGenerator:function(a){var b=a.series[0];if(null!==b.value&&a.data){var c="<tr><td class='key'>Mean - SD: </td><td class='x-value'>"+d3.format(",.2f")(a.data.values.Q1*a.data.values.norm)+"</td></tr><tr><td class='key'>Mean: </td><td class='x-value'>"+d3.format(",.2f")(a.data.values.Q2*a.data.values.norm)+"</td></tr><tr><td class='key'>Mean + SD: </td><td class='x-value'>"+d3.format(",.2f")(a.data.values.Q3*a.data.values.norm)+"</td></tr><tr><td class='key'>Max: </td><td class='x-value'>"+d3.format(",.2f")(a.data.values.norm)+"</td></tr><tr><td class='key'>Min: </td><td class='x-value'>"+d3.format(",.2f")(a.data.values.whisker_low*a.data.values.norm)+"</td></tr>",d="<thead><tr><td class='legend-color-guide'><div style='background-color: "+b.color+";'></div></td><td class='key'><strong>"+a.key+"</strong></td></tr></thead>";return"<table>"+d+"<tbody>"+c+"</tbody></table>"}}}}}}g()}])}(),function(){var a=angular.module("c.components.measurement");a.directive("cMeasurement",[function(){return{scope:{},replace:!0,templateUrl:"app/scripts/components/measurement/template.html",controller:"c.components.measurement.Controller"}}])}(),angular.module("c.components",["c.components.flash","c.components.tagCloud","c.components.filters","c.components.size","c.components.sizeDist","c.components.crawler","c.components.parser","c.components.language","c.components.ner","c.components.measurement","d3"]),angular.module("c.sections.home",[]),angular.module("c.sections",["c.sections.home"]),angular.module("metadataEvaluationApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","angular-table","c.components","c.sections","c.util","ui.bootstrap","infinite-scroll","nemLogging","ui-leaflet"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"app/scripts/sections/home/index.html",controller:"c.util.controllers.StaticPageController"}).when("/size",{templateUrl:"app/scripts/sections/home/size.html",controller:"c.util.controllers.StaticPageController"}).when("/crawler",{templateUrl:"app/scripts/sections/home/crawler.html",controller:"c.util.controllers.StaticPageController"}).when("/parser",{templateUrl:"app/scripts/sections/home/parser.html",controller:"c.util.controllers.StaticPageController"}).when("/language",{templateUrl:"app/scripts/sections/home/language.html",controller:"c.util.controllers.StaticPageController"}).when("/ner",{templateUrl:"app/scripts/sections/home/ner.html",controller:"c.util.controllers.StaticPageController"}).when("/measurement",{templateUrl:"app/scripts/sections/home/measurement.html",controller:"c.util.controllers.StaticPageController"}).when("/about",{templateUrl:"app/scripts/sections/home/about.html",controller:"c.util.controllers.StaticPageController"}).otherwise({redirectTo:"/"})}]).config(["$httpProvider",function(a){a.interceptors.push(["$window","$rootScope","$q",function(a,b,c){return{}}])}]);